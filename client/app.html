<head>
    <title>Axis and Allies</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
</head>
<body>
{{> controlPanel }}
<div class="page">
    {{> content }}
</div>
<div class="login-buttons-wrapper">
    {{ loginButtons align="right" }}
</div>
</body>

<template name="content">
    <div class="content">
        {{> gameList }}
    </div>
</template>

<template name="controlPanel">
    {{#if gameActive}}
        <div class="controls-area">
            <div class="controls">
                {{#if notYourTurn }}
                    <div class="controls-header">
                        <h1>
                            Waiting...
                        </h1>
                        {{#if waitingForReplay}}
                        <button class="skip-replay">Skip Replay</button>
                        {{/if}}
                    </div>
                    <div class="not-your-turn-modal"></div>
                {{else}}
                    {{#if phaseIs "DRAFT" }}
                        {{> draft army}}
                    {{/if}}
                    {{#if phaseIs "DEPLOY" }}
                        {{> deployment army}}
                    {{/if}}
                    {{#if phaseIs "MOVEMENT" }}
                        {{> movement army}}
                    {{/if}}
                    {{#if phaseIs "ASSAULT" }}
                        {{> assault army}}
                    {{/if}}
                    {{#if phaseIs "END" }}
                        {{> end army}}
                    {{/if}}
                {{/if}}

                {{#if combat }}
                    {{#with combat }}
                        {{> combat }}
                    {{/with}}
                {{else}}
                    {{#if unitInfo }}
                        {{#with unitInfo}}
                            {{> unitCard }}
                        {{/with}}
                    {{/if}}
                {{/if}}
                {{> message }}
            </div>
        </div>
    {{/if}}
    <footer class="{{#if gameActive}}shrunk-footer{{/if}}">
        Made by <a href="http://www.lpm.io">Leo Martel</a>
        | <a href="http://www.github.com/lmartel/AxisAndAllies">Github</a>
        {{#if gameActive}}
            | <a href="/" >Back to Menu</a>
        {{/if}}
        | <a href="http://www.wizards.com/default.asp?x=ah/aamprod/products" target="_blank">Buy the Original from WotC</a>
    </footer>
    <div class="help-page help">
        <h1>Rules</h1>
        <p>
            Axis and Allies is a turn-based strategy game for two players.
        </p>
        <h2>Bar</h2>
        <p>
            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        </p>
    </div>
    <div class="help-tab help">
        <h1>HELP</h1>
    </div>
</template>

<template name="message">
    <div class="message-wrapper">
        <div class="message">
            {{{ text }}}
        </div>
    </div>
</template>

<template name="footer">

</template>

<template name="gameList">
    <ul style="list-style-type: none;">
        {{#if loggedIn }}
            <li><button class="new-game-button">Create a new game</button></li>
        {{else}}
            <li>Log in to play!</li>
        {{/if}}
        <br>

        {{#each userGames}}
            {{> gameSummary }}
        {{/each}}
    </ul>
    <div class="demo-wrapper">
        <h1>Watch Recent Games: </h1>
        {{> demo }}
    </div>
</template>
<template name="gameSummary">
    {{#if phaseIs "END"}}
        <li>You played as the {{ faction }} in <a href="#" class="game-link">{{ name }}</a>, {{ results }} on round {{ round }}.</li>
    {{else}}
        <li>You're playing as the {{ faction }} in <a href="#" class="game-link">{{ name }}</a> on round {{ round }}.</li>
    {{/if}}
</template>
<template name="demo">
    {{#if ready}}
        <svg width="{{ width }}px" height="{{ height }}px" class="demo-board">
            <defs></defs>
        </svg>
    {{else}}
        {{ prepare }}
    {{/if}}
</template>
<template name="newGame">
    <div class="new-game-form">
        <label for="name">Name your game: </label><input type="text" name="name" id="name" value="My AA Game"><br>
        Choose your side: <br>
        <input type="radio" name="faction" id="Axis" value="Axis"><label for="Axis">The Axis</label><br>
        <input type="radio" name="faction" id="Allies" value="Allies"><label for="Allies">The Allies</label><br>
        <label for="opponent">Your opponent's email: </label><input type="email" name="opponent" id="opponent"><br>
        <button class="create-game">Create Game</button>
    </div>
</template>

<template name="game">
    <div class="game">
        <h1>{{ name }} - Round {{ currentRound }}</h1>
        <h3>{{ faction }} on {{ mapName }}</h3>
        <div class="board">
            {{> board}}
        </div>
    </div>
</template>
<template name="board">
    <svg width="{{ width }}px" height="{{ height }}px" class="game-board"></svg>
    {{#each actions}}
        {{> action }}
    {{/each}}
</template>
<template name="action">
    {{! executed on create }}
</template>

<template name="draft">
    <div class="controls-header">
        <h2>
            Draft your army!<br>
            Points left: <span class="draft-points-left">{{ pointsLeft }}</span>
        </h2>
    </div>
    <button class="army-ready">Done Drafting</button>
    <div class="army-accordion">
        {{#each availableCards}}
            {{> unitCard}}
        {{/each}}
    </div>
</template>
<template name="deployment">
    <div class="controls-header">
        <h2>Deploy your forces!<br>
            {{ unitsLeft }} units left.
        </h2>
    </div>
    <button class="army-ready">Done Deploying</button>
    <div class="army-accordion">
        {{#each availableCards}}
            {{> unitCard }}
        {{/each}}
    </div>
</template>
<template name="movement">
    <div class="controls-header">
        <h2>Movement phase:<br>Move your units!<br>
            {{ unitsLeft }} units left.
        </h2>
    </div>
    <button class="army-ready">Done Moving</button>
    {{ unitStatus }}
</template>
<template name="assault">
    <div class="controls-header">
        <h2>Assault phase:<br>attack the enemy<br>or move again.<br>
            {{ unitsLeft }} units left.
        </h2>
    </div>
    <button class="army-ready">Done Moving and Attacking</button>
    {{ unitStatus }}
</template>
<template name="end">
    <div class="controls-header">
        <h2>Game over!<br>{{ winner }}<br>was victorious.</h2>
    </div>
    <button class="army-ready">Watch Replay</button>
    {{ unitStatus }}
</template>
<template name="unitCard">
    <h3 class="unit-card-title unit-card-title-{{ faction }} {{#if isSelected}}selected{{/if}}">
        <span class="unit-card-name">{{ name }}</span>
        {{#if settingUp}}
            <input class="unit-spinner {{#if isSelectedSpinner}}selected{{/if}}" data-unit="{{ name }}" readonly />
        {{/if}}
    </h3>
    <div data-unit="{{ name }}" class="unit-card unit-card-{{ faction }} {{#if isSelected}}selected{{/if}}">
        <div class="unit-card-type">
            <h2>{{ type }} | {{ cost }}</h2>
        </div>

        <div class="unit-card-speed">
            <h3>Speed {{ speed }}</h3>
        </div>
        <div class="unit-card-defense">
            <h3>Defense {{ defense.front }} / {{ defense.rear }}</h3>
        </div>
        <div class="unit-card-attacks">
            <table>
                <tr>
                    <th>Attacks</th>
                    <th>Short<br>0-1</th>
                    <th>Medium<br>2-4</th>
                    <th>Long<br>5-8</th>
                </tr>
                <tr>
                    <th>Soldier</th>
                    <td>{{ attacks "SOLDIER" "short" }}</td>
                    <td>{{ attacks "SOLDIER" "medium" }}</td>
                    <td>{{ attacks "SOLDIER" "long" }}</td>
                </tr>
                <tr>
                    <th>Vehicle</th>
                    <td>{{ attacks "VEHICLE" "short" }}</td>
                    <td>{{ attacks "VEHICLE" "medium" }}</td>
                    <td>{{ attacks "VEHICLE" "long" }}</td>
                </tr>
            </table>
        </div>
    </div>
</template>
<template name="combat">
    {{ attacker.speed }}
</template>