<head>
    <title>Axis and Allies</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
</head>
<body>
{{> controlPanel }}
<div class="page">
    <div class="content">
        {{> gameList }}
    </div>
</div>
<div class="login-buttons-wrapper">
    {{ loginButtons align="right" }}
</div>
</body>

<template name="controlPanel">
    {{#if gameActive}}
        <div class="controls-area">
            <div class="controls">
                {{#if phaseIs "DRAFT" }}
                    {{> draft army}}
                {{/if}}
                {{#if phaseIs "DEPLOY" }}
                    {{> deployment army}}
                {{/if}}
                {{#if phaseIs "MOVEMENT" }}
                    {{> movement army}}
                {{/if}}
                {{#if phaseIs "ASSAULT" }}
                    {{> assault army}}
                {{/if}}
                {{#unless notYourTurn}}
                    {{> message }}
                {{/unless}}
            </div>
            {{#if notYourTurn }}
                <div class="not-your-turn-modal">
                    <div class="not-your-turn-popup">
                        <h1>
                            Waiting...
                        </h1>
                        {{#if waitingForReplay}}
                            <button class="skip-replay">Skip Replay</button>
                        {{/if}}
                        {{> message }}
                    </div>
                </div>
            {{/if }}
        </div>
    {{/if}}
</template>

<template name="message">
    <div class="message-wrapper">
        <div class="message">
            {{{ text }}}
        </div>
    </div>
</template>

<template name="gameList">
    <ul style="list-style-type: none;">
        <li><button class="new-game-button">Create a new game</button></li>
        {{#each userGames}}
            {{> gameSummary }}
        {{/each}}
    </ul>
</template>
<template name="gameSummary">
    <li>You're playing as the {{ faction }} in <a href="#" class="game-link">{{ name }}</a> on round {{ round }}.</li>
</template>
<template name="newGame">
    <div class="new-game-form">
        <label for="name">Name your game: </label><input type="text" name="name" id="name" value="My AA Game"><br>
        Choose your side: <br>
        <input type="radio" name="faction" id="Axis" value="Axis"><label for="Axis">The Axis</label><br>
        <input type="radio" name="faction" id="Allies" value="Allies"><label for="Allies">The Allies</label><br>
        <label for="opponent">Your opponent's email: </label><input type="email" name="opponent" id="opponent"><br>
        <button class="create-game">Create Game</button>
    </div>
</template>

<template name="game">
    <div class="game">
        <h1>{{ name }}</h1>
        <h3>{{ faction }} on {{ mapName }}</h3>
        <div class="board">
            {{> board}}
        </div>
    </div>
</template>
<template name="board">
    <svg width="{{ width }}px" height="{{ height }}px" class="test"></svg>
    {{#each actions}}
        {{> action }}
    {{/each}}
</template>
<template name="action">
    {{! executed on create }}
</template>

<template name="draft">
    <div class="controls-header">
        <h2>
            Draft your army!<br>
            Points left: <span class="draft-points-left">{{ pointsLeft }}</span>
        </h2>
    </div>
    <button class="army-ready">Done Drafting</button>
    <div class="army-accordion">
        {{#each availableCards}}
            {{> unitCard}}
        {{/each}}
    </div>
</template>
<template name="deployment">
    <div class="controls-header">
        <h2>Deploy your forces!<br>
            {{ unitsLeft }} units left.
        </h2>
    </div>
    <button class="army-ready">Done Deploying</button>
    <div class="army-accordion">
        {{#each availableCards}}
            {{> unitCard }}
        {{/each}}
    </div>
</template>
<template name="movement">
    <div class="controls-header">
        <h2>Your turn to move!<br>
            {{ unitsLeft }} units left.
        </h2>
    </div>
    <button class="army-ready">Done Moving</button>
    {{ unitStatus }}
</template>
<template name="assault">
    <div class="controls-header">
        <h2>Your turn to move!<br>
            {{ unitsLeft }} units left.
        </h2>
    </div>
    <button class="army-ready">Done Moving and Attacking</button>
    {{ unitStatus }}
</template>
<template name="unitCard">
    <h3 class="unit-card-title unit-card-title-{{ faction }} {{#if isSelected}}selected{{/if}}">
        <span class="unit-card-name">{{ name }}</span>
        <input class="unit-spinner {{#if isSelectedSpinner}}selected{{/if}}" data-unit="{{ name }}" readonly />
    </h3>
    <div data-unit="{{ name }}" class="unit-card unit-card-{{ faction }} {{#if isSelected}}selected{{/if}}">
        <div class="unit-card-type">
            <h2>{{ type }} | {{ cost }}</h2>
        </div>

        <div class="unit-card-speed">
            <h3>Speed {{ speed }}</h3>
        </div>
        <div class="unit-card-defense">
            <h3>Defense {{ defense.front }} / {{ defense.rear }}</h3>
        </div>
        <div class="unit-card-attacks">
            <table>
                <tr>
                    <th>Attacks</th>
                    <th>Short<br>0-1</th>
                    <th>Medium<br>2-4</th>
                    <th>Long<br>5-8</th>
                </tr>
                {{{ renderAttacks }}}
            </table>
        </div>
    </div>
</template>